var i=Object.defineProperty;var n=(s,t,e)=>t in s?i(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var o=(s,t,e)=>n(s,typeof t!="symbol"?t+"":t,e);class h{constructor(t="https://api.twitch.tv/helix/"){o(this,"baseUrl","https://api.twitch.tv/helix/");t&&(this.baseUrl=t)}async fetchTopStreams(t=3){const e=`${this.baseUrl}streams?first=${t}`;return await this.fetchData(e)}async fetchRandomStreams(t=3){const e=`${this.baseUrl}streams?first=50`,a=await this.fetchData(e);return Array.isArray(a)?a.sort(()=>Math.random()-.5).slice(0,t):[]}async fetchTopCategories(t=6){const e=`${this.baseUrl}games/top?first=${t}`;return await this.fetchData(e)}async fetchUserInfo(t){const e=`${this.baseUrl}users?login=${t}`;return await this.fetchData(e)}async fetchUserProfilePicture(t){var r;const e=`${this.baseUrl}users?login=${t}`;return(r=(await this.fetchData(e))[0])==null?void 0:r.profile_image_url}async fetchFollowers(t){const e=`${this.baseUrl}channels/followers?broadcaster_id=${t}`;return(await this.fetchSingle(e)).total}async fetchStreamInfo(t){const e=`${this.baseUrl}streams?user_login=${t}`;return(await this.fetchSingle(e)).data[0]}async fetchGameViewers(t){const e=`${this.baseUrl}streams?game_id=${t}&first=100`;return(await this.fetchData(e)).reduce((r,c)=>r+(c.viewer_count||0),0)}async fetchData(t){try{return(await $fetch(t,{headers:{Authorization:"Bearer vjzv0er311ix3kl48wg9mck6ozpmpw","Client-Id":"ibmqkgxechauftj75c6bpnhsgjcuaq"}})).data}catch(e){throw console.error("Error fetching data:",e),e}}async fetchSingle(t){try{return await $fetch(t,{headers:{Authorization:"Bearer vjzv0er311ix3kl48wg9mck6ozpmpw","Client-Id":"ibmqkgxechauftj75c6bpnhsgjcuaq"}})}catch(e){throw console.error("Error fetching single item:",e),e}}}const f=new h("");function u(s,t){const e=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=new RegExp("\\.0+$|(?<=\\.[0-9]*[1-9])0+$"),r=e.findLast(c=>s>=c.value);return r?(s/r.value).toFixed(t).replace(a,"").concat(r.symbol):"0"}export{f as d,u};
